<!DOCTYPE html>
<html>
<title>Photoelectric Effect</title> <!-- 모듈 제목 -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, chrome=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<style>
body {
  position : relative;
  font-family: "apple sd gothic neo" , sans-serif;
}
header, footer{
    font-family: "apple sd gothic neo" , sans-serif;
    position : relative;
    padding: 5em;
    color: white;
    background-color: #00004d;
    text-align: left;
}
.centered {
  position: relative;
  text-align:center;
  margin: 20px auto;
  width: 70%;
  padding: 1em;
}
h1,h2,h3,h4,h5,h6 {
    font-family: "apple sd gothic neo", sans-serif;
    letter-spacing: 2px;
}
#gui_container{
              position: relative;
              top: 100%;
              left: 50%;
            }
#gui{
  transform:translate(-50%, -0px);
}
</style>
<body>
  <!-- javascript 라이브러리 넣는 부분
  <script src='https://cdnjs.cloudflare.com/ajax/libs/three.js/r71/three.min.js'></script>
  <script src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/264161/OrbitControls.js'></script>
  <script src='http://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/TweenMax.min.js'></script>
  <script src='js/three.min.js'></script>
  <script src='js/threex.atmospherematerial.js'></script>
  <script src='js/dat.gui.min.js'></script>
  <script src="js/OrbitControls.js"></script>
  <script src='js/threex.laserbeam.js'></script>
-->
  <div class="w3-top">
    <div class="w3-bar w3-white w3-padding w3-card" style="letter-spacing:2px;">
      <a href="#home" class="w3-bar-item w3-button w3-black w3-round" style="height:100%;width:50%"><b>Photoelectric Effect</b></a>
      <!-- Right-sided navbar links. Hide them on small screens -->
      <div class="w3-right w3-hide-small">
        <a href="#about" class="w3-bar-item w3-button">Introduction</a>
        <a href="#bgtheory" class="w3-bar-item w3-button">Theory</a>
        <a href="#how" class="w3-bar-item w3-button">How</a>
        <a href="#module" class="w3-bar-item w3-button">Module</a>
      </div>
    </div>
  </div>

<div class="w3-content" style="max-width:100%">

  <!-- Introduction Section -->
  <div class="w3-row w3-padding-64" id="about">
    <div class="w3-col m6 w3-padding-large w3-hide-small">
      <br><br>
     <img src="img/intro.jpg" style="left:30px" class="w3-round w3-image w3-opacity-min" alt="Table Setting" width="440" height="400" >
    </div>

    <div class="w3-col m6 w3-padding-small">
      <br>
      <h1 class="w3-center w3-red">Introduction</h1>
      <p> A photoelectric effect is a phenomenon in which electrons are emitted when light of a certain frequency or more is applied to a metal surface, This because the energy of the photons is transmitted to the electrons. Einstein was awarded the Nobel Prize for this experiment that confirmed the particleity of light.</p>
      <p> In a vacuum tube like a picture made of a metal plate, if the light of appropriate intensity is applied to the positive electrode, the photoelectrons protrude to the negative electrode. At this time, when a voltage of a certain magnitude is applied, the photoelectron does not protrude even if the intensity of the light is enlarged. This is called a maximum stop voltage, which corresponds to the maximum photoelectron kinetic energy.</p>
      <hr>
      <p class="w3-large"> </p>
      <p class="w3-large w3-text-grey w3-hide-medium">

      </p>
    </div>
  </div>

  <!-- Background Theory Section -->
  <div class="w3-container w3-padding-small" id="bgtheory">
    <div align = 'left'>
      <br>
      <h1 class="w3-center w3-orange w3-text-white">Background Theory</h1>
      <hr>
      <h3>● Mathematical Description</h3>
      <p class="w3-left w3-text-black">
        According to the Planck equation, the energy
        <img src="http://latex.codecogs.com/gif.latex?E">
        of a photon incident at a constant frequency
        <img src="http://latex.codecogs.com/gif.latex?\nu" title="\nu" />
        is
        <img src="http://latex.codecogs.com/gif.latex?E&space;=&space;h\nu" title="E = h\nu" />
        . (Where
        <img src="http://latex.codecogs.com/gif.latex?h" title="h" />
        is Planck 's constant). And work function of the metal
        <img src="http://latex.codecogs.com/gif.latex?\phi&space;=&space;h\nu_0" title="\phi = h\nu_0" />
        where
        <img src="http://latex.codecogs.com/gif.latex?\phi" title="\phi" />
        is the minimum energy for electrons to leave the metal surface. Also, if the maximum kinetic energy of the emitted electrons is
        <img src="http://latex.codecogs.com/gif.latex?KE_{max}" title="KE_{max}" />
        then the following relation holds between them.

        <br><br>
        <img src="http://latex.codecogs.com/gif.latex?E&space;=&space;\phi&space;&plus;&space;KE_{max}" title="E = \phi + KE_{max}" /><br>
        <img src="http://latex.codecogs.com/gif.latex?h\nu&space;=&space;h\nu_0&space;&plus;&space;KE_{max}" title="h\nu = h\nu_0 + KE_{max}" /><br>
        <img src="http://latex.codecogs.com/gif.latex?KE_{max}&space;=&space;h\nu&space;-&space;h\nu_0&space;=&space;h(\nu-\nu_0)" title="KE_{max} = h\nu - h\nu_0 = h(\nu-\nu_0)" /><br>

        <br>
        Therefore, for electrons to move, light with energy above the work function of the metal should be applied, and the minimum frequency of light at that time is called the threshold frequency.
        <br><br>
        If any retarding voltage is applied, the equation is changed as follows.
        <br><br>
        <img src="http://latex.codecogs.com/gif.latex?E&space;=&space;\phi&space;&plus;&space;KE_{max}&space;&plus;&space;V_{retard}" title="E = \phi + KE_{max} + V_{retard}" /><br>
        <img src="http://latex.codecogs.com/gif.latex?KE_{max}&space;=&space;E&space;-&space;\phi&space;-&space;V_{retard}" title="KE_{max} = E - \phi - V_{retard}" /><br>
        <br>
        At this time, the voltage at which the movement of the electrons stops is called the maximum retarding voltage.


      </p><br>

      <h3>● Limits that Classical Mechanics Encountered</h3>
        Some of the following results from the photoelectric effect experiments were not explained at all from the classical view of light as wave.
        <h5>　Ⅰ. Light with frequency lower than the threshold can't emit electrons.</h5>
        <p class="w3-left w3-text-black">
        </p>
        <h5> 　Ⅱ. Maximum kinetic energy of electrons only differs from the frequency given.</h5>
        <p class="w3-left w3-text-black">
        </p>
        <h5> 　Ⅲ. Even the weak lights with its frequency bigger than the threshold emit electrons.</h5>
        <p class="w3-left w3-text-black">
            All three results suggest the opposite interpretation of classical predictions that only the intensity of light, regardless of the type of light (frequency), will affect the kinetic energy of the electron. That is, the energy of the electron depends only on the frequency of light, not on the intensity of light, and the intensity of light affects only the amount of emitted electrons.
            <br><br>
            These results are interpreted from the view of quantum theory, as shown in
          <img src="http://latex.codecogs.com/gif.latex?KE_{max}&space;=&space;h\nu&space;-&space;h\nu_0" title="KE_{max} = h\nu - h\nu_0" />
            According to the equation, the kinetic energy of the electron only depends on the frequency of the light.
        </p><br>

      <h3>● Use and Effects</h3>
        - Photomultipliers <br>
         These are extremely light-sensitive vacuum tubes with a photocathode coated onto part (an end or side) of the inside of the envelope. The photocathode contains combinations of materials such as cesium, rubidium, and antimony specially selected to provide a low work function, so when illuminated even by very low levels of light, the photocathode readily releases electrons. By means of a series of electrodes (dynodes) at ever-higher potentials, these electrons are accelerated and substantially increased in number through secondary emission to provide a readily detectable output current. Photomultipliers are still commonly used wherever low levels of light must be detected.
        <br><br>

        - Image sensors <br>
         Video camera tubes in the early days of television used the photoelectric effect, for example, Philo Farnsworth's "Image dissector" used a screen charged by the photoelectric effect to transform an optical image into a scanned electronic signal.
        <br><br>

        - Photoelectron spectroscopy <br>
         Since the energy of the photoelectrons emitted is exactly the energy of the incident photon minus the material's work function or binding energy, the work function of a sample can be determined by bombarding it with a monochromatic X-ray source or UV source, and measuring the kinetic energy distribution of the electrons emitted.<br>
         Photoelectron spectroscopy is usually done in a high-vacuum environment, since the electrons would be scattered by gas molecules if they were present. However, some companies are now selling products that allow photoemission in air. The light source can be a laser, a discharge tube, or a synchrotron radiation source.

      <p class="w3-left w3-text-black"></p><br>
    </div>
  </div>

 <!-- How to Section -->
  <div class="w3-row w3-padding-small" id="how">
    <div class="w3-col m6 w3-padding-large w3-hide-small">
      <br>
     <img src="img/usage.jpg" class="w3-round w3-image w3-opacity-min" alt="Table Setting" width="340" height="400">
    </div>

    <br>
    <div class="w3-col m6 w3-padding-small">
      <br><br>
      <h1 class="w3-center w3-blue">How to use</h1>
      <h5 class="w3-center">Photoelectric Effect</h5>
      <p></p>
      <p></p>
      <hr>
      <p class="w3-large"></p>
      <p class="w3-large">(1) Select the type of the metal.</p>
      <p class="w3-large">(2) Choose the frequency watching the threshold frequency above.</p>
      <p class="w3-large">(3) Select Apply and then Play.</p>
      <p class="w3-large">(4) See the differences changing retarding voltages and light intensity.</p>
      <p class="w3-large"> Try to compare graphs with the graphs in default settings. </p>
      <p class="w3-large"> 　You can see the difference in the graphs by - </p>
      <p class="w3-large"> 　　▶ 1st graph : changing the metal </p>
      <p class="w3-large"> 　　▶ 2nd graph : changing the intensity </p>
      <p class="w3-large"> 　　▶ 3rd graph : changing the metal </p>
    </div>
  </div>

  <!-- module 코드가 들어가는 부분 -->
  <div class="w3-container w3-padding-small" id="module">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <div class="centered"><br><br>
      <h1 class="w3-center w3-green">Module</h1>
    </div>
    <div id="menu" style="width:300px; height:700px; background-color:#EEEEEE; position:absolute; border : 1px solid #000000; left:1010px;">
      <p align = "center">
        <br><br><br>
        Type of Metal(work function in eV)<br>
        <select id="phi" >
          <option value="1.9">Cs 1.9eV</option>
          <option value="2.2">K  2.2eV</option>
          <option value="2.3">Na 2.3eV</option>
          <option value="2.5">Li 2.5eV</option>
          <option value="3.2">Ca 3.2eV</option>
          <option value="4.7">Cu,Ag 4.7eV</option>
          <option value="6.4">Pt 6.4eV</option>
        </select>
          <br><Br>
        Threshold Frequency : <p id="demo"></p>
      </p>
        <p align="center">

        Frequency<br>
        <input type="range" name="nature" id="frequency" min="1" max="20" value="3" onchange="frequency_repr(this.value)" step="0.01"> <br>
        <input type="text" name="nature" id="frequency_repr" value="3" size="2" readonly> (×<img src="http://latex.codecogs.com/gif.latex?10%5E{14}"> Hz)
        <br><br>

        Retarding Voltage <br>
        <input type="range" name="nature" id="voltage" min="0" max="5" value="0" onchange="voltage_repr(this.value)" step="0.01"><br>
        <input type="text" name="nature" id="voltage_repr" value="0" size="2" readonly> (eV)
        <br><br>

        Intensity of Light <br>
        <input type="range" name="nature" id="intensity" min="2" max="10" value="3" onchange="intensity_repr(this.value)"><br>
        <input type="text" name="nature" id="intensity_repr" value="3" size="2" readonly> (Relative)
        <br><br>

      </p>
      <p align = "center">
        <button id="apply" onclick="apply();"> APPLY </button>
        <button id="play"> PLAY </button>
        <button id="pause"> PAUSE </button>
        <button id="reset" onclick="reset();"> RESET </button>
        <br><br><br>
      </p>
    </div>
    <canvas id = "canvas" width="1000" height="700"></canvas>
    <div id="graph1" style="width:429px; height:430px; position:absolute"></div>
    <div id="graph2" style="width:429px; height:430px; left:429px; position:absolute" ></div>
    <div id="graph3" style="width:429px; height:430px; left:858px; position:absolute"></div>
    <script type = "text/javascript">
      const h = 4.136e-15, c = 2.99e+8, m = 9.10e-31, q = 1.16e-19;
      // h = [eV*s], c = [m/s], m = [kg]

      function frequency_repr(val){ document.getElementById("frequency_repr").value = val;}
      function voltage_repr(val)  { document.getElementById("voltage_repr").value = val;}
      function intensity_repr(val){ document.getElementById("intensity_repr").value = val;}

      var freq = document.getElementById("frequency_repr").value * 1e+14;
      var volt = document.getElementById("voltage_repr").value * 1;
      var intense = document.getElementById("intensity_repr").value * 1;
      var phi = document.getElementById("phi").value * 1;
      var freq_0 = phi / h;
      document.getElementById("demo").innerHTML = Math.round(freq_0 * 1e-14 * 100)/100 + "×E+14 Hz";
      document.getElementById("demo").style.textAlign = "center";

      var canvas = document.getElementById("canvas");
      var ctx = canvas.getContext("2d");

      var requestId = false;

      //필요한거 아니면 열지마세요
      var lab = {
          width : canvas.width,
          height: canvas.height,

          //실험기기 문자 표현
          text : [
              Light = {
                  text : "Light",
                  size : "30px Arial",
                  x : canvas.width * 0.40,
                  y : canvas.height * 0.13
              },
              Electrons = {
                  text : "Electrons",
                  size : "20px Arial",
                  x : canvas.width * 0.5,
                  y : canvas.height * 0.27
              },
              Eqt = {
                  text : "Evacuated quartz tube",
                  size : "20px Arial",
                  x : canvas.width * 0.5,
                  y : canvas.height * 0.43
              },
              plus = {
                  text : "+",
                  size : "40px Arial",
                  x : canvas.width * 0.13,
                  y : canvas.height * 0.3
              },
              minus = {
                  text : "-",
                  size : "40px Arial",
                  x : canvas.width * 0.87,
                  y : canvas.height * 0.3
              },
              V = {
                  text : "V",
                  size : "40px Arial",
                  x : canvas.width * 0.5,
                  y : canvas.height* 0.52
              },
              A = {
                  text : "A",
                  size : "40px Arial",
                  x : canvas.width * .825,
                  y : canvas.height * .645
              }
          ],
          draw_text : function(input){
              ctx.font = input.size;
              ctx.fillStyle = "black";
              ctx.textAlign = "center";
              ctx.fillText(input.text, input.x, input.y);
          },

          //실험기기 그리기 - 안 열어보는 것을 아주 추천
          draw_experiment : function(){

              // Rect A
              ctx.beginPath();;
              ctx.strokeStyle = "black";
              ctx.lineWidth = 1;
              ctx.moveTo(this.width * 0.225, this.height * 0.3125); //A0
              ctx.lineTo(this.width * 0.10 , this.height * 0.3125); //A1
              ctx.lineTo(this.width * 0.10 , this.height * 0.50 ); //A2
              ctx.lineTo(this.width * 0.50 - 30 , this.height * 0.50 ); //A2'
              ctx.stroke();

              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 1;
              ctx.moveTo(this.width * 0.50 + 30 , this.height * 0.50 ); //A3'
              ctx.lineTo(this.width * 0.90 , this.height * 0.50 ); //A3
              ctx.lineTo(this.width * 0.90 , this.height * 0.3125); //A4
              ctx.lineTo(this.width * 0.775, this.height * 0.3125); //A5
              ctx.stroke();

              // Rect B
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 1;
              ctx.moveTo(this.width * 0.10 , this.height * 0.50 ); //B0
              ctx.lineTo(this.width * 0.10 , this.height * 0.575); //B1
              ctx.lineTo(this.width * 0.40 , this.height * 0.575); //B2
              ctx.lineTo(this.width * 0.40 , this.height * 0.600); //B3
              ctx.stroke();

              // Arrow
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 1;
              ctx.moveTo(this.width * (0.40 - 0.02), this.height * 0.590);
              ctx.lineTo(this.width * 0.4, this.height * 0.600);
              ctx.lineTo(this.width * (0.40 + 0.02), this.height * 0.59);
              ctx.stroke();

              // Rect C
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 1;
              ctx.moveTo(this.width * 0.30 , this.height * 0.625); //C0
              ctx.lineTo(this.width * 0.25 , this.height * 0.625); //C1
              ctx.lineTo(this.width * 0.25 , this.height * 0.75 ); //C2
              ctx.lineTo(this.width * 0.75 , this.height * 0.75 ); //C3
              ctx.lineTo(this.width * 0.75 , this.height * 0.625); //C4
              ctx.stroke();

              // Line D
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 1;
              ctx.moveTo(this.width * 0.625, this.height * 0.625); //D0
              ctx.lineTo(this.width * 0.825 - 30, this.height * 0.625); //D0'
              ctx.stroke();

              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 1;
              ctx.moveTo(this.width * 0.825 + 30, this.height * 0.625); //D1'
              ctx.lineTo(this.width * 0.90 , this.height * 0.625); //D1
              ctx.lineTo(this.width * 0.90 , this.height * 0.50 ); //D2
              ctx.stroke();

              // Resistance R
              ctx.beginPath();;
              ctx.strokeStyle = "black";
              ctx.lineWidth = 5;
              ctx.moveTo(this.width * 0.30 , this.height * 0.625); //R0
              ctx.lineTo(this.width * (0.30 + (0 + 1/3) * 0.0416), this.height * 0.625); //Ru1
              ctx.lineTo(this.width * (0.30 + (0 + 2/3) * 0.0416), this.height * 0.615); //Ru1
              ctx.lineTo(this.width * (0.30 + 0.025 * 1 + 1/3 * 0.0416), this.height * 0.65); //Rd1
              ctx.lineTo(this.width * (0.30 + 0.025 * 1+ 2/3 * 0.0416), this.height * 0.615); //Ru2
              ctx.lineTo(this.width * (0.30 + 0.025 * 2 + 1/3 * 0.0416), this.height * 0.65); //Rd2
              ctx.lineTo(this.width * (0.30 + 0.025 * 2 + 2/3 * 0.0416), this.height * 0.615); //Ru3
              ctx.lineTo(this.width * (0.30 + 0.025 * 3 + 1/3 * 0.0416), this.height * 0.65); //Rd3
              ctx.lineTo(this.width * (0.30 + 0.025 * 3 + 2/3 * 0.0416), this.height * 0.615); //Ru4
              ctx.lineTo(this.width * (0.30 + 0.025 * 4 + 1/3 * 0.0416), this.height * 0.65); //Rd4
              ctx.lineTo(this.width * (0.30 + 0.025 * 4 + 2/3 * 0.0416), this.height * 0.615); //Ru5
              ctx.lineTo(this.width * (0.30 + 0.025 * 5 + 1/3 * 0.0416), this.height * 0.65); //Rd5
              ctx.lineTo(this.width * (0.30 + 0.025 * 5 + 2/3 * 0.0416), this.height * 0.615); //Ru6
              ctx.lineTo(this.width * (0.30 + 0.025 * 6 + 1/3 * 0.0416), this.height * 0.65); //Rd6
              ctx.lineTo(this.width * (0.30 + 0.025 * 6 + 2/3 * 0.0416), this.height * 0.625); //Rd6
              ctx.lineTo(this.width * .475, this.height * 0.625); //RF0
              ctx.lineTo(this.width * .485, this.height * 0.625); //RF1
              ctx.stroke();

              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 1;
              ctx.moveTo(this.width * 0.485 ,this.height * 0.625); //RF1
              ctx.lineTo(this.width * 0.575 ,this.height * 0.625); //RF2
              ctx.stroke();

              // Batteries
              // Battery+1
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 1.2;
              ctx.moveTo(this.width * 0.575, this.height * 0.625 - 25);
              ctx.lineTo(this.width * 0.575, this.height * 0.625 + 25);
              ctx.stroke();

              // Battery-1
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 3;
              ctx.moveTo(this.width * (0.575 + 0.0167), this.height * 0.625 - 15);
              ctx.lineTo(this.width * (0.575 + 0.0167), this.height * 0.625 + 15);
              ctx.stroke();

              // Battery+2
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 1.2;
              ctx.moveTo(this.width * (0.575 + 0.0167 * 2), this.height * 0.625 - 25);
              ctx.lineTo(this.width * (0.575 + 0.0167 * 2), this.height * 0.625 + 25);
              ctx.stroke();

              // Battery-2
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 3;
              ctx.moveTo(this.width * 0.625, this.height * 0.625 - 15);
              ctx.lineTo(this.width * 0.625, this.height * 0.625 + 15);
              ctx.stroke();


              // Conductor Left
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 8;
              ctx.moveTo(this.width * 0.225, this.height * 0.28125); //C_L0
              ctx.lineTo(this.width * 0.225, this.height * 0.34375); //C_L1
              ctx.stroke();

              // Conductor Right
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 8;
              ctx.moveTo(this.width * 0.775, this.height * 0.28125); //C_R0
              ctx.lineTo(this.width * 0.775, this.height * 0.34375); //C_R1
              ctx.stroke();

              // Voltmeter
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.lineWidth = 1;
              ctx.arc(this.width * 0.5, this.height * 0.5, 30, 0, 2 * Math.PI);
              ctx.stroke();

              // Ammeter
              ctx.beginPath();
              ctx.lineWidth = 1;
              ctx.strokeStyle = "black";
              ctx.arc(this.width * 0.825, this.height * 0.625, 30, 0, 2 * Math.PI);
              ctx.stroke();

              // Vacuum tube upper line
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.moveTo(this.width * 0.225, this.height * 0.3125 - 60); //C_L0
              ctx.lineTo(this.width * 0.775, this.height * 0.3125 - 60); //C_L1
              ctx.stroke();

              // Vaccum tube Left circle
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.arc(this.width * 0.225, this.height * 0.3125, 60, 0.5 * Math.PI, 1.5 * Math.PI);
              ctx.stroke();

              // Vacuum tube down line
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.moveTo(this.width * 0.225, this.height * 0.3125 + 60); //C_L0
              ctx.lineTo(this.width * 0.775, this.height * 0.3125 + 60); //C_L1
              ctx.stroke();

              // Vacuum tube Right circle
              ctx.beginPath();
              ctx.strokeStyle = "black";
              ctx.arc(this.width * 0.775, this.height * 0.3125, 60, 1.5 * Math.PI, 0.5 * Math.PI);
              ctx.stroke();

          }
      };

      var positions = {
          dy : canvas.height * (.34375 - .28125),

          left_cond_x : canvas.width * .225,
          left_cond_y1 : canvas.height * .28125,
          left_cond_y2 : canvas.height * .34375,

          right_cond_x : canvas.width * .775,
          right_cond_y1 : canvas.height * .28125,
          right_cond_y2 : canvas.height * .34375,

          light_start : {
              x : this.left_cond_x + 300,
              dy_light : this.dy * Math.random(),
              y : this.left_cond_y1 - 200
          }
      };
      var light = {
          lights : [],
          displacement : positions.dy * .05,
          create : function(){
              this.lights.push({
                  x1 : positions.left_cond_x,
                  x2 : positions.left_cond_x  + 400,
                  y1 : positions.left_cond_y1 + positions.dy * .5,
                  y2 : positions.left_cond_y1 + positions.dy * .5 - 200
              });
          },
          draw : function(input){
              ctx.beginPath();
              ctx.strokeStyle = "#fff910";
              ctx.lineWidth = 3;
              ctx.moveTo(input.x1,input.y1);
              ctx.lineTo(input.x2,input.y2);
              ctx.stroke();
          }
      };
      var electrons = {
          crowd : [],
          create : function(){
              this.crowd.push({
                  x : positions.left_cond_x - 550 * Math.random(),
                  y : positions.left_cond_y1 + Math.random() * positions.dy,
                  size : 3,
                  KE : h * freq - phi - volt,
                  color : "white",
                  v_real : Math.sqrt( 2 * (h * freq - phi - volt) / m),
                  v_par : (Math.sqrt( 2 * (h * freq - phi - volt) / m) / (1e+15))
              })
          },
          update : function(input){
              if(input.x < positions.right_cond_x) input.x += input.v_par;
              if(input.x >= positions.right_cond_x) input.x = positions.left_cond_x;
              if(input.x > positions.left_cond_x) input.color = "#f45f82";
          },
          update_prop : function(input){
              input.v_par = (Math.sqrt( 2 * (h * freq - phi - volt) / m) / (1e+15)) * 2;
          },
          draw : function(input){
              ctx.beginPath();
              ctx.fillStyle = input.color;
              ctx.arc(input.x, input.y, input.size, 0, 2 * Math.PI);
              ctx.fill();
          }
      };

      lab.draw_experiment();
      for(var i = 0; i < lab.text.length; i++) lab.draw_text(lab.text[i]);
      while(light.lights.length < 10) light.create();
      for(var i = 0; i < light.lights.length; i++) {
          delta = i % 2 === 0 ? light.displacement : -light.displacement;
          light.lights[i].y1 += i * delta;
          light.lights[i].y2 += i * delta;
      }

      function set_metal(){
          switch(phi){
              case 1.9:
                  metal = "Cs";
                  break;
              case 2.2:
                  metal = "K";
                  break;
              case 2.3:
                  metal = "Na";
                  break;
              case 2.5:
                  metal = "Li";
                  break;
              case 3.2:
                  metal = "Ca";
                  break;
              case 4.7:
                  metal = "Cu,Ag";
                  break;
              case 6.4:
                  metal = "Pt";
                  break;
              default :
                  metal = "Cs";
          }
      }
      set_metal();
      function apply(){
          reset();
          window.cancelAnimationFrame(requestId);
          freq = document.getElementById("frequency_repr").value * 1e+14;
          volt = document.getElementById("voltage_repr").value * 1;
          intense = document.getElementById("intensity_repr").value * 1;
          phi = document.getElementById("phi").value * 1;
          freq_0 = phi / h;
          document.getElementById("demo").innerHTML = Math.round(freq_0 * 1e-14 * 100)/100 + "×E+14 Hz";

          set_metal();
          draw();
      }

      ctx.globalCompositeOperation = "destination-over";
      function action(){
          ctx.clearRect(0,0,canvas.width,canvas.height);

          lab.draw_experiment();
          for(var i = 0; i < lab.text.length; i++) lab.draw_text(lab.text[i]);
          for(var i = 0; i < intense; i++) light.draw(light.lights[i]);

          while(electrons.crowd.length <= 500) electrons.create();

          for(var i = 0; i < electrons.crowd.length; i++) {
              if (i % intense !== 0) {
                  electrons.update_prop(electrons.crowd[i]);
                  electrons.update(electrons.crowd[i]);
                  electrons.draw(electrons.crowd[i]);
              }
          }
          requestId = requestAnimationFrame(action);
      }
      document.getElementById("play").addEventListener("click",function(e) {
          requestId = window.requestAnimationFrame(action);
      });
      document.getElementById("pause").addEventListener("click", function(e) {
          window.cancelAnimationFrame(requestId);
      });

      function reset(){
          ctx.clearRect(0,0,canvas.width,canvas.height);

          lab.draw_experiment();
          for(var i = 0; i < lab.text.length; i++) lab.draw_text(lab.text[i]);

          window.cancelAnimationFrame(requestId);
          electrons.crowd = [];
      }

      var layout1 = {
          title : 'KE - Frequency',
          xaxis : {
              title : 'Frequency(×E+14 Hz)',
              showgrid : false,
              zeroline : false
          },
          yaxis : {
              title : 'Maximum photoelectron Energy, eV',
              showline : false
          },
          showlegend : true
      };
      var layout2 = {
          title : 'Current - Frequency',
          xaxis : {
              title : 'Frequency',
              showgrid : false,
              zeroline : false
          },
          yaxis : {
              title : 'Photoelectron current',
              showline : false
          },
          showlegend : true
      };
      var layout3 = {
          title : 'Current - Frequency',
          xaxis : {
              title : 'Retarding Voltage',
              showgrid : false,
              zeroline : false
          },
          yaxis : {
              title : 'Photoelectron Current',
              showline : false
          },
          showlegend : true
      };

      var color_graph = {
          default_color : "#16c2f4",
          user_color : "#7d36f4"
      };
      function draw(){
          var eVHz = {
              x : [],
              y : [],
              mode : 'lines',
              name : 'Cs - default',
              line : {
                  color : color_graph.default_color
              },
              connectgaps : true
          };
          for(var i = 0; i < 20; i++){
              eVHz.x[i] = i;
              eVHz.y[i] = h * i * 1e+14 - 1.9;
          }
          var eVHz2 = {
              x : [],
              y : [],
              mode : 'lines',
              name : metal + " - user",
              line : {
                  color : color_graph.user_color
              },
              connectgaps : true
          };
          for(var i = 0; i < 20; i++){
              eVHz2.x[i] = i;
              eVHz2.y[i] = h * i * 1e+14 - phi;
          }
          var data1 = [eVHz, eVHz2];

          var IF = {
              x : [],
              y : [],
              mode : 'lines',
              name : 'Cs - default',
              line : {
                  color : color_graph.default_color
              },
              connectgaps : true
          };
          for(var i = 0; i < 40; i++){
              IF.x[i] = i/2;
              if(i < 1.9) IF.y[i] = 0;
              if(i > 1.9) IF.y[i] = 3 * 1.023;
          }
          var IF2 = {
              x : [],
              y : [],
              mode : 'lines',
              name : metal + " - user",
              line : {
                  color : color_graph.user_color
              },
              connectgaps : true
          };
          for(var i = 0; i < 40; i++){
              IF2.x[i] = i/2;
              if(i < phi) IF2.y[i] = 0;
              if(i > phi) IF2.y[i] = intense * 1.023;
          }
          var data2 = [IF, IF2];

          var V0_def = 1e-18 * (h * freq - 1.9)/q;
          var V0 = 1e-18 * (h * freq - phi)/q;
          var  IVs = {
              x : [],
              y : [],
              mode : 'lines',
              name : 'default : ' + 3,
              line : {
                  color : color_graph.default_color
              },
              connectgaps : true
          };
          for(var i = 0; i < 150; i++){
              IVs.x[i] = i - V0_def - 30;
              IVs.y[i] = 3 * fermi(i - V0_def - 30, - V0_def / 2 );
          }
          var  IVs2 = {
              x : [],
              y : [],
              mode : 'lines',
              name : "user : " + intense,
              line : {
                  color : color_graph.user_color
              },
              connectgaps : true
          };
          for(var i = 0; i < 150; i++){
              IVs2.x[i] = i - V0 - 30;
              IVs2.y[i] = intense * fermi(i - V0 - 30, - V0 / 2 );
          }

          var data3 = [IVs, IVs2];

          Plotly.newPlot('graph1', data1, layout1);
          Plotly.newPlot('graph2', data2, layout2);
          Plotly.newPlot('graph3', data3, layout3);
      }
      window.onload = function(){
          draw();
      };

      function fermi(x,a) {
          return 1/(Math.exp((-x+a)/5)+1);
      }

    </script>
  </div>
</div>

<!-- Footer -->
  <div id="footer" style="position:absolute; top:3900px; left:100px;">
<footer class="w3-padding-32">
  <p style="font-size:22px;"><b>Contact</b></p>
  <p style="font-size:18px;">Office tel : 02-6490-2640</p>
  <p style="font-size:18px;">Location : 228, Science & Technology-building, 163, Seoulsiripdae-ro, Dongdaemun-gu, Seoul, Republic of Korea</p>
  <p style="font-size:18px;">Copyright by Department of Physics, The University of Seoul - <a href="http://physics.uos.ac.kr/Modules" title="http://physics.uos.ac.kr/Modules" target="_blank" class="w3-hover-text">CPL@UOS</a></p>
</footer>
  </div>

</body>
</html>
